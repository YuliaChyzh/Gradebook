@using BLL.DTO
@model Dictionary<PL.Models.StudentViewModel, GroupDTO>

@{
    ViewBag.Title = "ShowStudent";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.ActionLink("Додати нового студента", "CreateStudent", "Student")

<form asp-controller="Student" asp-action="ShowStudent" method="get">
    <p>
        Ім'я: <input type="text" name="searchName">

        Група: <select id="groups" name="searchGroup" asp-for="searchGroup" asp-items="@ViewBag.groups">
            <option value="">Всі</option>
            @foreach (var item in ViewBag.groups)
            {
                <option>@item.Name</option>
            }
        </select>

        Середній бал: <input name="searchStudentAvg" asp-for="searchStudentAvg" type="number" max="100" min="1" />

        Успішність: <select id="groups" name="searchProgress" asp-for="searchProgress">
            <option>Всі</option>
            <option>Успішні</option>
            <option>Неуспішні</option>
        </select>

        Предмет: <select id="subjects" name="searchSubject" asp-for="searchSubject" asp-items="@ViewBag.subjects">
            <option value="">Всі</option>
            @foreach (var item in ViewBag.subjects)
            {
                <option>@item.Name</option>
            }
        </select>
        <input type="submit" value="Пошук" />
    </p>
</form>


<table class="table">
    <tr>
        <th><p>Ім'я студента</p></th>
        <th><p>Група</p></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
    <tr>
        <td>
            <p>@item.Key.Name</p>
        </td>
        <td>
            <p>@item.Value.Name</p>
        </td>
        <td>
            @Html.ActionLink("Деталі", "StudentDetails", "Student", new { idStudent = item.Key.Id }, null)
        </td>
        <td>
            @Html.ActionLink("Видалити студента", "DeleteStudent", "Student", new { idStudent = item.Key.Id }, null)
        </td>
        <td>
            @Html.ActionLink("Редагувати", "EditStudent", "Student", new { idStudent = item.Key.Id }, null)
        </td>
        <td>
            @Html.ActionLink("Додати новий предмет студенту", "AddSubject", "Student", new { idStudent = item.Key.Id }, null)
        </td>
    </tr>
    }
</table>
<a>@ViewBag.message</a>

<p>@Html.ActionLink("На головну", "Index", "Home")</p>

